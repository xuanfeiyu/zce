# Part 2 · 前端工程化实践

## 模块二 · 模块化开发与规范化标准

## 任务一：模块化开发

### 1.模块化概述

- 内容概要
  - 模块化演变过程
  - 模块化规范
  - 常用的模块化打包工具
  - 基于模块化工具构建现代 Web 应用
  - 打包工具的优化技巧

### 2.模块化演变过程

- Stage1 - 文件划分方式
  - 污染全局作用域
  - 命名冲突问题
  - 无法管理模块依赖关系
  - 早期模块化完全依靠约定
- Stage2 - 命名空间方式
- Stage3 - IIFE
- 早期在没有工具和规范的情况下对模块化的落地方式

### 3.模块化规范的出现

- CommonJS 规范
  - 一个文件就是一个模块
  - 每个模块都有单独的作用域
  - 通过 module.exports 导出成员
  - 通过 require 函数载入模块
- CommonJS 是以同步模式加载模块
- AMD(Asynchronous Module Definiton)

```javascript
// 定义一个模块
define('module1', ['jquery', './module2'], function($, module2){
    return {
        start: funciton() {
            $('body').animate({ margin: 200px' })
            module2()
        }
    }
})
```
- Require.js

```javascript
// 载入一个模块
require(['./module1'], function(module1){
    module1.start()
})
```

- 目前绝大多数第三方库都支持AMD规范
- AMD 使用起来相对复杂
- 模块 JS 文件请求频繁
- Sea.js + CMD

```javascript
// CMD 规范（类似 Common.js 规范）
define(funciton (require, exports, module)) {
    // 通过 require 引入依赖
    var $ = require('jquery')
    // 通过 exports 或者 module.exports 对外暴露成员
    module.exports = function(){
        console.log('module 2~')
        $('body').append(<p>module2</p>)
    }
}
```

### 4.模块化标准规范

- 浏览器环境 ES Modules
- NodeJs 环境 Common.js